asyncapi: 3.0.0
info:
  title: FAForever Lobby Server API
  version: 1.0.0
  description: |-
    Since AsyncAPI can only model a publish/subscribe model, this spec only covers the server side of the bidirectional lobby connection
  license:
    name: MIT
    url: https://www.apache.org/licenses/LICENSE-2.0
defaultContentType: application/json
servers:
  production:
    host: ws.faforever.com
    pathname: /
    protocol: wss
  test:
    host: ws.faforever.xyz
    pathname: /
    protocol: wss
  local:
    host: localhost
    pathname: /
    protocol: wss
channels:
  server-inbound:
    title: server to client communication
    messages:
      JoinGameRequest:
        $ref: '#/components/messages/JoinGameRequest'
  client-inbound:
    title: client to server communication
    messages:
      JoinGameRequest:
        $ref: '#/components/messages/JoinGameRequest'
operations:
  serverJoinGame:
    action: receive
    description: "Server receives clients request to join a game"
    channel:
      $ref: '#/channels/server-inbound'
    messages:
      - $ref: '#/channels/server-inbound/messages/JoinGameRequest'
    tags:
      - name: server
  clientJoinGame:
    action: send
    description: "Client requests to join a game"
    channel:
      $ref: '#/channels/client-inbound'
    messages:
      - $ref: '#/channels/client-inbound/messages/JoinGameRequest'
    tags:
      - name: client
components:
  messages:
    JoinGameRequest:
      name: game_join
      title: "Request to join a game"
      payload:
        type: object
        required:
          - command
          - uid
        properties:
          command:
            type: string
            const: join_game
          uid:
            type: integer
            minimum: 1
          password:
            type: string
